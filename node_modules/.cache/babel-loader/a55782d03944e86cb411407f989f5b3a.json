{"ast":null,"code":"import React, { Component } from \"react\";\nimport axios from 'axios';\nimport './CrudCurso.css';\nimport Main from '../template/Main';\nimport { resolveTo } from \"react-router/lib/router\";\nconst title = \"Cadastro de Curso\";\nconst urlAPI = \"http://localhost:5278/api/Curso\";\nconst initialState = {\n  curso: {\n    nomeCurso: '',\n    codCurso: 0,\n    periodo: ''\n  },\n  lista: []\n};\nexport default function CrudCurso() {\n  state = { ...initialState\n  };\n  axios(urlAPI).then(resp => {//this.setState({lista:resp.data})\n  });\n}\n_c = CrudCurso;\nlimpar();\n{\n  this.setState({\n    aluno: initialState.aluno\n  });\n}\nsalvar();\n{\n  const curso = this.state.curso;\n  curso.codCurso = Number(curso.codCurso);\n  const metodo = curso.id ? 'put' : 'post';\n  const url = curso.id ? `${urlAPI}/${curso.id}` : urlAPI;\n  axios[metodo](url, curso).then(resp => {\n    const lista = this.getListaAtualizada(resp.data); //  this.setState({curso:initialState.curso,lista})\n  });\n}\ngetListaAtualizada(curso, add = true);\n{//  const lista = this.state.lista.filter(a =>a.id !== curso.id);\n\n  /* if(add) lista.unshift(curso);\n   return lista;*/\n}\natualizaCampo(evento);\n{\n  const curso = { ...this.state.curso\n  };\n  curso[evento.target.name] = evento.target.value; //   this.setState({curso});\n}\ncarregar(curso);\n{\n  // this.setState({curso})\n  const url = urlAPI + \"/\" + curso.id;\n  if (window.confirm(\"Confirma alteração \" + curso.id)) ;\n  axios['PUT'](url, curso).then(resp => {\n    const lista = this.getListaAtualizada(curso, false);\n    this.setState({\n      curso: initialState.curso,\n      lista\n    });\n  });\n}\nremoveEventListener(curso);\n{\n  const url = urlAPI + \"/\" + curso.id;\n\n  if (window.confirm(\"Confirma remoção do curso:\" + curso.codCurso)) {\n    console.log(\"entrou no confirm\");\n    axios['delete'](url, curso).then(resp => {\n      const lista = this.getListaAtualizada(curso, false);\n      this.setState({\n        curso: initialState.curso,\n        lista\n      });\n    });\n  }\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"CrudCurso\");","map":{"version":3,"names":["React","Component","axios","Main","resolveTo","title","urlAPI","initialState","curso","nomeCurso","codCurso","periodo","lista","CrudCurso","state","then","resp","limpar","setState","aluno","salvar","Number","metodo","id","url","getListaAtualizada","data","add","atualizaCampo","evento","target","name","value","carregar","window","confirm","removeEventListener","console","log"],"sources":["/Users/u21430/escola/src/components/CrudCurso/CrudCurso.js"],"sourcesContent":["import React, {Component} from \"react\";\nimport axios from 'axios';\nimport './CrudCurso.css';\nimport Main from '../template/Main';\nimport { resolveTo } from \"react-router/lib/router\";\n\nconst title =\"Cadastro de Curso\";\n\nconst urlAPI =\"http://localhost:5278/api/Curso\";\n\nconst initialState={\n    curso:{nomeCurso:'',codCurso:0,periodo:''},\n    lista:[]\n}\n\nexport default function CrudCurso(){\nstate = {...initialState}\naxios(urlAPI).then(resp =>{\n    //this.setState({lista:resp.data})\n})\n}\nlimpar();{\n    this.setState({aluno : initialState.aluno});\n}\nsalvar();{\n    const  curso= this.state.curso;\n    curso.codCurso = Number(curso.codCurso);\n    const metodo = curso.id?'put':'post';\n    const url = curso.id ? `${urlAPI}/${curso.id}`:urlAPI;\n\n    axios[metodo](url,curso)\n    .then(resp =>{\n        const lista = this.getListaAtualizada(resp.data)\n      //  this.setState({curso:initialState.curso,lista})\n    })\n}\ngetListaAtualizada(curso, add = true);{\n   //  const lista = this.state.lista.filter(a =>a.id !== curso.id);\n   /* if(add) lista.unshift(curso);\n    return lista;*/\n}\natualizaCampo(evento);{\n    const curso = {...this.state.curso};\n     curso[evento.target.name]= evento.target.value;\n   \n   //   this.setState({curso});\n}\ncarregar(curso);{\n   // this.setState({curso})\n    const url = urlAPI + \"/\" + curso.id;\n    if(window.confirm(\"Confirma alteração \"+curso.id));\n    axios['PUT'](url,curso)\n    .then(resp =>{\n        const lista = this.getListaAtualizada(curso,false)\n        this.setState({curso:initialState.curso,lista})\n    })\n}\nremoveEventListener(curso);{\n    const url = urlAPI + \"/\"+curso.id;\n    if(window.confirm(\"Confirma remoção do curso:\"+curso.codCurso)){\n        console.log(\"entrou no confirm\");\n\n        axios['delete'](url,curso)\n        .then(resp=>{\n            const lista = this.getListaAtualizada(curso,false)\n            this.setState({curso:initialState.curso,lista})\n        })\n    }\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}